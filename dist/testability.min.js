/*! testability.js - v0.1.0
 *  Release on: 2016-09-22
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.testability=b()}):"object"==typeof exports?module.exports=b():a.testability=b()}(this,function(){"use strict";var a=function a(){if(!this||this.constructor!==a)return new a;var b=0,c=[];this.when={ready:function(a){0===b?a():c.push(a)}},this.wait={oneMore:function(){b+=1},oneLess:function(){b-=1,b<0&&(b=0),0===b&&setTimeout(function(){for(;0===b&&0!==c.length;)c.pop()()})},for:function(a){this.oneMore(),a.then(this.oneLess).catch(this.oneLess)}}}();return a});