/*! testability.js - v0.2.0
 *  Release on: 2016-10-08
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.testability=b()}):"object"==typeof exports?module.exports=b():a.testability=b()}(this,function(){"use strict";var a=function a(){if(!this||this.constructor!==a)return new a;var b=0,c=[];this.reset=function(){b=0,c=[]},this.when={ready:function(a){0===b?a():c.push(a)}},this.wait={start:function(){var a=this;return this.oneMore(),{end:function(){a.oneLess()}}},oneMore:function(){b+=1},oneLess:function(){if(b-=1,b<0&&(b=0),0===b)for(;0===b&&0!==c.length;)c.pop()()},for:function(a){this.oneMore(),a.then(this.oneLess).catch(this.oneLess)}}}();return a});