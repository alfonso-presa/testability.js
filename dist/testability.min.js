/*! testability.js - v0.2.0
 *  Release on: 2016-05-11
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.testability=b()}):"object"==typeof exports?module.exports=b():a.testability=b()}(this,function(){"use strict";var a=function b(){if(!this||this.constructor!==b)return new b;var a,c=0,d=[],e=function(){return(new Date).getTime()};this.when={ready:function(a){0===c?a():d.push(a)},readyFor:function(b,c){var d=this;d.ready(function(){setTimeout(function(){var f=!1;if(a){var g=e(),h=g-a;h>=b&&(f=!0)}f?c():d.readyFor(b,c)},b)})}},this.wait={oneMore:function(){c+=1,a=null},oneLess:function(){c-=1,0===c&&(a=e(),setTimeout(function(){for(;0===c&&0!==d.length;)d.pop()()}))},"for":function(a){this.oneMore(),a.then(this.oneLess)["catch"](this.oneLess)}}}();return a});